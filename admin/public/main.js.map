{"version":3,"sources":["main.js"],"names":["url","app","Vue","el","data","recipeList","new_recipename","new_ingredients","new_instruction","new_time","new_portions","new_image","created","localStorage","getItem","window","location","replace","get","methods","fetch","then","res","json","i","length","ingredients","join","instruction","catch","err","console","log","del","id","method","found","_id","splice","add","event","split","ob","recipeName","time","parseInt","portions","image","jsonStr","JSON","stringify","headers","body","unshift","upd","updValueArr","target","value","logout","clear","readMore","parentElement","style","height","innerHTML"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\n//URL till webbtjänst\r\nlet url = \"https://sleepy-tundra-34734.herokuapp.com/api/recipes\";\r\n\r\n// Ny VUe-instans\r\nlet app = new Vue({\r\n    el: '#app',\r\n    data: {\r\n        recipeList: \"\",\r\n        new_recipename: \"\",\r\n        new_ingredients: \"\",\r\n        new_instruction: \"\",\r\n        new_time: \"\",\r\n        new_portions: \"\",\r\n        new_image: \"\"\r\n    },\r\n    created() { // Vid skapande av Vue-instansen:\r\n        // Kontrollera inlogg \r\n        if (!localStorage.getItem(\"username\")) {\r\n            window.location.replace(\"adminlogin.html\");\r\n        }\r\n        // Anropa metod som hämtar data från rest api\r\n        this.get();\r\n    },\r\n    methods: {\r\n        get: function() { // Hämta alla recept med fetch api\r\n            fetch(url)\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n                for (let i = 0; i<data.length; i++)\r\n                {\r\n                    // Gör om ingrediens- och instruktionsarrayerna till textsträngar\r\n                    data[i].ingredients = data[i].ingredients.join(\"\\n\");\r\n                    data[i].instruction = data[i].instruction.join(\"\\n\");\r\n                }\r\n\r\n                this.recipeList = data}) // Lagra datan i recipeList i Vue:s data\r\n            .catch((err) => console.log(err)); \r\n            \r\n        },\r\n        del: function(id) { // Ta bort recept\r\n            fetch(url+\"/delete/\" + id, { //Lägger till IDt som skickades med som argument till url:en\r\n                method: \"DELETE\",\r\n            })\r\n            .then((res) => res.json())\r\n            .then((data) => console.log(data))\r\n            .catch((err) => console.log(err));\r\n            let found = -1;\r\n            // Ta bort receptet ur recipeList-arrayen för att se aktuell receptlista utan att behöva ladda om sidan\r\n            for (let i = 0; i < this.recipeList.length; i++) {\r\n                if(id == this.recipeList[i]._id) {\r\n                    found = i;\r\n                    if (found != -1) {\r\n                        this.recipeList.splice(found, 1);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        add: function(event) { // Lägg till nytt recept\r\n            let new_ingredients = this.new_ingredients.split(\"\\n\"); // Gör array av ingrediens-textsträng\r\n            let new_instruction = this.new_instruction.split(\"\\n\"); // Gör array av instruktion-textsträng\r\n            let ob = {};\r\n            // Lagra värden från inputfälten i ett objekt\r\n            ob.recipeName = this.new_recipename;\r\n            ob.ingredients = new_ingredients;\r\n            ob.instruction = new_instruction;\r\n            ob.time = parseInt(this.new_time);\r\n            ob.portions = parseInt(this.new_portions);\r\n            ob.image = this.new_image;\r\n\r\n            let jsonStr = JSON.stringify(ob); // Konvertera objekt till JSON\r\n            fetch(url + \"/add\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: jsonStr // Skicka med JSON-strängen i fetch-anropet\r\n            }) .then((res) => res.json())\r\n            .then((data) => console.log(data))\r\n            .catch((err) => console.log(err))\r\n            \r\n            // Gör textsträngar av ingrediens- och instruktions-array igen\r\n            ob.ingredients = ob.ingredients.join(\"\\n\");\r\n            ob.instruction = ob.instruction.join(\"\\n\");\r\n            this.recipeList.unshift(ob); // Lägg till objektet först i arrayen med resterande recept för att se det tillagda receptet utan att behöva ladda om sida\r\n            // Töm inputfälten i lägg till-formuläret\r\n            this.new_recipename = this.new_ingredients = this.new_instruction = this.new_time = this.new_portions = this.new_image = \"\";\r\n        },\r\n        upd: function(event) { // Uppdatera recept\r\n            \r\n            let updValueArr = event.target.value.split(\"|\"); // Gör array av den textsträng med inputfältens värden som lagrats i uppdatera-knappens value-attribut\r\n            let ingredients = updValueArr[1].split(\"\\n\"); // Gör array av ingrediens-textsträngen\r\n            let instruction = updValueArr[2].split(\"\\n\"); // Gör array av instruktion-textsträngen\r\n            let ob = {};\r\n            // Lagra värden från arrayen som skapats i ett objekt\r\n            ob.recipeName = updValueArr[0];\r\n            ob.ingredients = ingredients;\r\n            ob.instruction = instruction;\r\n            ob.time = parseInt(updValueArr[3]);\r\n            ob.portions = parseInt(updValueArr[4]);\r\n            ob.image = updValueArr[5];\r\n\r\n            let jsonStr = JSON.stringify(ob); // KOnvertera objektet till JSON\r\n            fetch(url+\"/update/\" + event.target.id, { //Lägger till IDt till url:en\r\n                method: \"PUT\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: jsonStr // Skicka med JSON-strängen i anropet\r\n            })\r\n            .then((res) => res.json())\r\n            .then((data) => console.log(data))\r\n            .catch((err) => console.log(err))\r\n        },\r\n        logout: function(event) { // Loggar ut admin när denne klickar på logga ut-knappen\r\n            localStorage.clear(); // Tar bort lagrat värde som bekräftar inloggning i localStorage\r\n            location.replace(\"adminlogin.html\"); // Skickar användare till logga in-sidan\r\n        },\r\n        readMore: function(event) { // Möjliggör att fälla ned och upp boxarna med formulären frö att visa mer/mindre\r\n            if (event.target.parentElement.style.height != \"unset\") {\r\n                event.target.parentElement.style.height = \"unset\";\r\n                event.target.innerHTML = \"Visa mindre\";\r\n            } else {\r\n                event.target.parentElement.style.height = \"25px\";\r\n                event.target.innerHTML = \"Visa mer\";\r\n\r\n            }\r\n        }\r\n    }\r\n});\r\n \r\n\r\n"],"file":"main.js"}