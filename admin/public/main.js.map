{"version":3,"sources":["main.js"],"names":["url","app","Vue","el","data","recipeList","new_recipename","new_ingredients","new_instruction","new_time","new_portions","new_image","created","localStorage","getItem","window","location","replace","get","methods","fetch","then","res","json","i","length","ingredients","join","instruction","catch","err","console","log","del","id","method","found","_id","splice","add","event","split","ob","recipeName","time","parseInt","portions","image","jsonStr","JSON","stringify","headers","body","unshift","upd","updValueArr","target","value","logout","clear","readMore","parentElement","style","height","innerHTML"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\n//URL till webbtjänst\r\nlet url = \"https://sleepy-tundra-34734.herokuapp.com/api/recipes\";\r\n\r\nlet app = new Vue({\r\n    el: '#app',\r\n    data: {\r\n        recipeList: \"\",\r\n        new_recipename: \"\",\r\n        new_ingredients: \"\",\r\n        new_instruction: \"\",\r\n        new_time: \"\",\r\n        new_portions: \"\",\r\n        new_image: \"\"\r\n    },\r\n    created() {\r\n        // Kontrollera inlogg\r\n        if (!localStorage.getItem(\"username\")) {\r\n            window.location.replace(\"adminlogin.html\");\r\n        }\r\n        this.get();\r\n    },\r\n    methods: {\r\n        get: function() {\r\n            fetch(url)\r\n            .then((res) => res.json())\r\n            .then((data) => {\r\n                for (let i = 0; i<data.length; i++)\r\n                {\r\n                    data[i].ingredients = data[i].ingredients.join(\"\\n\");\r\n                    data[i].instruction = data[i].instruction.join(\"\\n\");\r\n                }\r\n\r\n                this.recipeList = data})\r\n            .catch((err) => console.log(err)); \r\n            \r\n        },\r\n        del: function(id) {\r\n            fetch(url+\"/delete/\" + id, { //Lägger till IDt från det element som användaren klickade på till url:en\r\n                method: \"DELETE\",\r\n            })\r\n            .then((res) => res.json())\r\n            .then((data) => console.log(data))\r\n            .catch((err) => console.log(err));\r\n            let found = -1;\r\n            for (let i = 0; i < this.recipeList.length; i++) {\r\n                if(id == this.recipeList[i]._id) {\r\n                    found = i;\r\n                    if (found != -1) {\r\n                        this.recipeList.splice(found, 1);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        add: function(event) {\r\n            let new_ingredients = this.new_ingredients.split(\"\\n\");\r\n            let new_instruction = this.new_instruction.split(\"\\n\");\r\n            let ob = {};\r\n            ob.recipeName = this.new_recipename;\r\n            ob.ingredients = new_ingredients;\r\n            ob.instruction = new_instruction;\r\n            ob.time = parseInt(this.new_time);\r\n            ob.portions = parseInt(this.new_portions);\r\n            ob.image = this.new_image;\r\n\r\n            let jsonStr = JSON.stringify(ob);\r\n            fetch(url + \"/add\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: jsonStr\r\n            }) .then((res) => res.json())\r\n            .then((data) => console.log(data))\r\n            .catch((err) => console.log(err))\r\n            \r\n            ob.ingredients = ob.ingredients.join(\"\\n\");\r\n            ob.instruction = ob.instruction.join(\"\\n\");\r\n            this.recipeList.unshift(ob);\r\n            this.new_recipename = this.new_ingredients = this.new_instruction = this.new_time = this.new_portions = this.new_image = \"\";\r\n        },\r\n        upd: function(event) {\r\n            \r\n            let updValueArr = event.target.value.split(\"|\");\r\n            let ingredients = updValueArr[1].split(\"\\n\");\r\n            let instruction = updValueArr[2].split(\"\\n\");\r\n            let ob = {};\r\n            ob.recipeName = updValueArr[0];\r\n            ob.ingredients = ingredients;\r\n            ob.instruction = instruction;\r\n            ob.time = parseInt(updValueArr[3]);\r\n            ob.portions = parseInt(updValueArr[4]);\r\n            ob.image = updValueArr[5];\r\n\r\n            let jsonStr = JSON.stringify(ob);\r\n            fetch(url+\"/update/\" + event.target.id, { //Lägger till IDt till url:en\r\n                method: \"PUT\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: jsonStr\r\n            })\r\n            .then((res) => res.json())\r\n            .then((data) => console.log(data))\r\n            .catch((err) => console.log(err))\r\n        },\r\n        logout: function(event) {\r\n            localStorage.clear();\r\n            location.replace(\"adminlogin.html\");\r\n        },\r\n        readMore: function(event) {\r\n            if (event.target.parentElement.style.height != \"unset\") {\r\n                event.target.parentElement.style.height = \"unset\";\r\n                event.target.innerHTML = \"Visa mindre\";\r\n            } else {\r\n                event.target.parentElement.style.height = \"25px\";\r\n                event.target.innerHTML = \"Visa mer\";\r\n\r\n            }\r\n        }\r\n    }\r\n});\r\n \r\n\r\n"],"file":"main.js"}